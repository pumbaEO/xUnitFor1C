Перем	ГлобПерем;

//{ основная процедура для юнит-тестирования xUnitFor1C
Перем ЮТест;

Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮТест = ЮнитТестирование;
	ЮнитТестирование.ВключитьЗависимостьТестов();
	
	ВсеТесты = Новый Массив;

	ДопДанные = Новый Структура;
	ДопДанные.Вставить("Зависимый", Истина);

	//ДопДанные.Вставить("ВключаетТест", "ТестДолжен_СравнитьСостояниеОбработки");
	
	ПараметрыТестов = Новый Структура("ИмяТеста,Транзакция, ДопДанные ", "ТестДолжен_ИзменитьСостояниеПеременной", Истина, ДопДанные);
	ВсеТесты.Добавить(ПараметрыТестов);
	//ВсеТесты.Добавить("";
	//ВсеТесты.Добавить("ТестДолжен_ИзменитьСостояниеПеременной");

	ВсеТесты.Добавить("ТестДолжен_ИзменитьСостояниеОбработки");
	
	ДопДанные = Новый Структура;
	
	ДопДанные.Вставить("Зависимый", Истина);
	ДопДанные.Вставить("ВключаетТест", Новый Массив());
	ДопДанные.ВключаетТест.Добавить("ТестДолжен_ИзменитьСостояниеПеременной");
	
	ПараметрыТестов = Новый Структура("ИмяТеста,Транзакция, ДопДанные ", "ТестДолжен_СравнитьСостояниеПеременной", Истина, ДопДанные);
	
	ВсеТесты.Добавить(ПараметрыТестов);
	
	ДопДанные = Новый Структура;
	ДопДанные.Вставить("Зависимый", Истина);
	ДопДанные.Вставить("ВключаетТест", Новый Массив());
	ДопДанные.ВключаетТест.Добавить("ТестДолжен_ИзменитьСостояниеОбработки");
	ДопДанные.ВключаетТест.Добавить("ТестДолжен_СравнитьСостояниеПеременной");
	ДопДанные.ВключаетТест.Добавить("Тест_ПараметрыТестов");
	ПараметрыТестов = Новый Структура("ИмяТеста,Транзакция, ДопДанные ", "ТестДолжен_СравнитьСостояниеОбработки", Истина, ДопДанные);
	ВсеТесты.Добавить(ПараметрыТестов);

	Возврат ВсеТесты;
	
КонецФункции
//}

//{ блок юнит-тестов - сами тесты

Процедура ТестДолжен_ИзменитьСостояниеПеременной() Экспорт
	ГлобПерем = 2;
КонецПроцедуры

Процедура ТестДолжен_СравнитьСостояниеПеременной() Экспорт
	ЮТест.ПроверитьРавенство(2, ГлобПерем, "Не выполнено условие 2 != ГлобПерем - тесты не являются зависимыми");
КонецПроцедуры

Процедура ТестДолжен_ИзменитьСостояниеОбработки() Экспорт
	ЭтотОбъект.Состояние = 2;
КонецПроцедуры

Процедура ТестДолжен_СравнитьСостояниеОбработки() Экспорт
	ЮТест.ПроверитьРавенство(2, Состояние, "Не выполнено условие 2 != Состояние - тесты не являются зависимыми");
КонецПроцедуры

//} 
